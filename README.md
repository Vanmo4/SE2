# Web-приложение на основе библиотеки Streamlit: райдшеринг Uber в Нью-Йорке

Демонстрационное Web-приложение [Streamlit](https://streamlit.io) для интерактивной визуализации подачи машин райдшеринга Uber в Нью-Йорке и в его крупных аэропортах с течением времени.

Используются библиотеки:
- Altair (Библиотека статической визуализации, основанная на граммматиках визуализации Vega и Vega-Lite);
- Numpy (Open-source модуль, представляющий общие математические и числовые операции в виде прескомпилированных, быстрых функций);
- Pandas (Библиотека для обработки и анализа данных);
- Pydeck (Библиотека для создания гибко настраиваемых многослойных графиков);
- Streamlit (Фреймворк для развёртывания моделей машинного обучения в Web-приложениях).

Репозиторий проекта состоит из следующих файлов:
- [Readme.md] - документация
- [ml_web_app.py] - код модели машинного обучения
- [requirements.txt] - список библиотек для установки
- [test_web_app.py] - тест проверки работоспособности приложения
- [uber-raw-data-sep14.csv.gz] - датасет
- [workflows/python-app.yml] - файл автоматизированного запуска тестов Continuous Integration, тестирует GitHub Actions и проверяет работоспособность Web-приложения

Описание работы приложения:

* Происходит загрузка исходных данных с помощью функции load_data. Данные загружаются из файла uber-raw-data-sep14.csv.gz, который находится в той же директории, что и скрипт.

* Функция map используется для определения областей на карте. Она принимает данные, координаты lat и lon, а также значение zoom в качестве аргументов.

* Функция filter_by_data используется для фильтрации данных с часовым интервалом. Она принимает DataFrame df и выбранный час hour_selected в качестве аргументов.

* Функция mpoint используется для вычисления средней величины для полученного набора данных. Она принимает координаты x и y в качестве аргументов.

* Функция histdata используется для фильтрации данных по часам. Она принимает DataFrame df и выбранный час hr в качестве аргументов.

* В конце кода происходит вызов функций load_data, filter_by_data, mpoint и histdata для выполнения соответствующих задач.

* Далее происходит построение верхнего уровня визуализации. Пользователь может выбрать час подачи с помощью слайдера. При изменении положения слайдера обновляется параметр запроса в URL.

* Средний уровень визуализации представляет собой карту Нью-Йорка с отображением данных райдшеринга в выбранный час. Карта строится с помощью функции map, которая принимает данные, координаты lat и lon, а также значение zoom в качестве аргументов.

* Нижний уровень визуализации представляет собой гистограмму, которая отображает поминутную раскладку поездок в выбранный час. Гистограмма строится с помощью библиотеки altair.

* В конце кода происходит расчет данных для гистограммы и отображение гистограммы на странице приложения.
